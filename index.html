<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¹Ø±Ø¶ Ù…Ø¨Ø§Ø±ÙŠØ§Øª LiveScore - Ù…ØªÙƒØ§Ù…Ù„</title>
    <style>
        /* --- CSS Styling --- */
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f9;
            color: #333;
            margin: 0;
            padding: 20px;
            text-align: right; /* Ø¯Ø¹Ù… RTL */
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        h2 {
            color: #007bff;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .match-card {
            background-color: #e9ecef;
            border-radius: 8px;
            margin-bottom: 15px;
            padding: 15px;
            transition: background-color 0.3s;
            border-right: 5px solid #007bff; /* Ù„ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© */
        }
        .match-card:hover {
            background-color: #dcdfe3;
        }
        .match-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .league-name {
            font-weight: bold;
            color: #28a745;
            cursor: pointer;
            text-decoration: underline;
            flex-basis: 25%;
        }
        .team-name {
            font-weight: 600;
            color: #333;
            flex-grow: 1;
            text-align: center;
            cursor: pointer; 
            padding: 0 10px;
        }
        .time-status {
            font-weight: bold;
            color: #dc3545;
            margin: 0 15px;
            flex-basis: 10%;
        }

        /* --- Full Screen Modal (Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø©) --- */
        .modal {
            display: none; 
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.9); 
            padding-top: 50px;
        }
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto; 
            padding: 40px;
            border-radius: 10px;
            width: 80%;
            max-width: 800px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5);
            animation: fadeIn 0.5s;
        }
        .close {
            color: #aaa;
            float: left;
            font-size: 35px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s;
        }
        .close:hover {
            color: #000;
        }
        .modal-body h4 {
            color: #007bff;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
            margin-top: 20px;
        }

        /* ØµÙ†Ø¯ÙˆÙ‚ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¯ÙˆØ±ÙŠ */
        .details-box {
            background-color: #fff3cd;
            border: 1px solid #ffc34d;
            padding: 15px;
            margin-top: 10px;
            border-radius: 5px;
            color: #856404;
        }
    </style>
</head>
<body>

    <div class="container">
        <h2 id="main-title">ØªØ­Ù…ÙŠÙ„ Ù…Ø¨Ø§Ø±ÙŠØ§Øª: 2025/12/01</h2>
        <div id="matches-list">
            <p id="loading-message">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</p>
        </div>

        <hr>

        <div id="league-details-output" class="details-box">
            <p>Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ø³Ù… **Ø¯ÙˆØ±ÙŠ** Ù„Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„Ù‡ (Ù…ÙƒØ§Ù† Ø´Ø¹Ø§Ø± Ø§Ù„Ø¯ÙˆØ±ÙŠØŒ Ø§Ù„Ø¨Ù„Ø¯ØŒ Ø§Ù„Ø®).</p>
        </div>
    </div>

    <div id="match-modal" class="modal">
        <div class="modal-content">
            <span class="close" id="close-modal">&times;</span>
            <div id="modal-content-placeholder" class="modal-body">
                </div>
        </div>
    </div>

    <script>
        // --- JavaScript Logic ---

        const API_URL = 'https://prod-cdn-mev-api.livescore.com/v1/api/app/date/soccer/20251201/1?locale=en';
        
        const matchesList = document.getElementById('matches-list');
        const leagueDetailsOutput = document.getElementById('league-details-output');
        const matchModal = document.getElementById('match-modal');
        const modalContentPlaceholder = document.getElementById('modal-content-placeholder');
        const closeModalButton = document.getElementById('close-modal');

        /**
         * 1. Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† API
         */
        async function fetchMatchesData() {
            try {
                const response = await fetch(API_URL);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                return await response.json();
            } catch (error) {
                console.error("Fetch Error:", error);
                matchesList.innerHTML = `<p style="color: red;">
                    ğŸ”´ **Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:** Ù„Ù… Ù†ØªÙ…ÙƒÙ† Ù…Ù† Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„Ù‰ API. 
                    Ù‚Ø¯ ÙŠÙƒÙˆÙ† Ø¨Ø³Ø¨Ø¨ Ù‚ÙŠÙˆØ¯ CORS Ø£Ùˆ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø±Ø§Ø¨Ø·.
                    ${error.message}
                </p>`;
                return null;
            }
        }

        /**
         * 2. ØªØ­Ù„ÙŠÙ„ ÙˆØ¨Ù†Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
         */
        async function renderMatches() {
            const data = await fetchMatchesData();
            if (!data || !data.Stages) {
                document.getElementById('loading-message').style.display = 'none';
                return;
            }

            matchesList.innerHTML = ''; // Ø¥Ø²Ø§Ù„Ø© Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„

            data.Stages.forEach(stage => {
                const leagueName = stage.Snm;
                const countryName = stage.Cnm;
                const leagueDetails = `Ø§Ù„Ø¨Ù„Ø¯: ${countryName} | Ù…Ø¹Ø±Ù Ø§Ù„Ø¯ÙˆØ±ÙŠ (SID): ${stage.Sid} | Ø§Ù„Ø´Ø¹Ø§Ø±: ${stage.badgeUrl || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯'}`;

                // Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø³Ù… Ù„Ù„Ø¯ÙˆØ±ÙŠ
                const leagueHeader = document.createElement('h3');
                leagueHeader.className = 'league-name';
                leagueHeader.style.cursor = 'default'; // Ù„Ø§ Ù†Ø­ØªØ§Ø¬ Ø£Ù† ÙŠÙƒÙˆÙ† Ø§Ù„Ù†Øµ ÙƒÙ„Ù‡ Ù‚Ø§Ø¨Ù„ Ù„Ù„Ù†Ù‚Ø± ÙƒØ¯ÙˆØ±ÙŠ
                leagueHeader.innerHTML = `ğŸ† ${leagueName} - ${countryName}`;
                matchesList.appendChild(leagueHeader);

                // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¯ÙˆØ±ÙŠ
                if (stage.Events && stage.Events.length > 0) {
                    stage.Events.forEach(event => {
                        const homeTeam = event.T1[0];
                        const awayTeam = event.T2[0];
                        
                        const statusText = getStatusText(event.Eps);
                        const startTime = formatTime(event.Esd);
                        const teamDetails = `
                            **Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©:** ${homeTeam.Nm} Ø¶Ø¯ ${awayTeam.Nm}.<br>
                            **Ø§Ù„Ø­Ø§Ù„Ø©:** ${statusText}<br>
                            **ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø¡:** ${startTime}<br>
                            **Ù…Ø¹Ø±Ù Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© (EID):** ${event.Eid}
                            ${event.Media ? `<br>**Ø§Ù„Ø¨Ø« Ø§Ù„Ù…ØªØ§Ø­:** ${event.Media[112] ? event.Media[112][0].eventId : 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}` : ''}
                        `;
                        
                        const card = document.createElement('div');
                        card.className = 'match-card';
                        card.innerHTML = `
                            <div class="match-info">
                                <span class="league-name" data-type="league" data-details="${leagueDetails}">${leagueName}</span>
                                <span class="team-name" data-type="match" data-hometeam="${homeTeam.Nm}" data-awayteam="${awayTeam.Nm}" data-status="${statusText}" data-details="${teamDetails}">${homeTeam.Nm} (${homeTeam.Abr})</span>
                                <span class="time-status">${statusText === 'Ù„Ù… ØªØ¨Ø¯Ø£' ? startTime.split(' ')[1] : statusText}</span>
                                <span class="team-name" data-type="match" data-hometeam="${homeTeam.Nm}" data-awayteam="${awayTeam.Nm}" data-status="${statusText}" data-details="${teamDetails}">${awayTeam.Nm} (${awayTeam.Abr})</span>
                            </div>
                        `;
                        matchesList.appendChild(card);
                    });
                } else {
                     matchesList.innerHTML += `<p style="padding: 10px; color: #666;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¨Ø§Ø±ÙŠØ§Øª Ù…ÙØ¬Ø¯ÙˆÙ„Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø¯ÙˆØ±ÙŠ ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ØªØ§Ø±ÙŠØ®.</p>`;
                }
            });

            addInteractionListeners();
        }

        /**
         * 3. Ø¯ÙˆØ§Ù„ Ù…Ø³Ø§Ø¹Ø¯Ø© (Helper Functions)
         */

        // ØªØ±Ø¬Ù…Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©
        function getStatusText(eps) {
            switch (eps) {
                case 'NS': return 'Ù„Ù… ØªØ¨Ø¯Ø£';
                case 'FT': return 'Ù…ÙƒØªÙ…Ù„Ø©';
                case 'HT': return 'Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø´ÙˆØ· Ø§Ù„Ø£ÙˆÙ„';
                case '1T': return 'Ø§Ù„Ø´ÙˆØ· Ø§Ù„Ø£ÙˆÙ„';
                case '2T': return 'Ø§Ù„Ø´ÙˆØ· Ø§Ù„Ø«Ø§Ù†ÙŠ';
                case 'PEN': return 'Ø±ÙƒÙ„Ø§Øª ØªØ±Ø¬ÙŠØ­';
                default: return eps;
            }
        }

        // ØªÙ†Ø³ÙŠÙ‚ ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø¡ (20251201210000 -> 01/12/2025 21:00)
        function formatTime(esd) {
            if (!esd || esd.length !== 14) return 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯';
            const year = esd.substring(0, 4);
            const month = esd.substring(4, 6);
            const day = esd.substring(6, 8);
            const hour = esd.substring(8, 10);
            const minute = esd.substring(10, 12);
            return `${day}/${month}/${year} ${hour}:${minute}`;
        }


        /**
         * 4. Ø¯Ø§Ù„Ø© ÙØªØ­ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚Ø© (Modal) Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©
         */
        function openModal(homeTeam, awayTeam, status, details) {
            modalContentPlaceholder.innerHTML = `
                <div style="text-align: center;">
                    <h3>Ù…Ø¨Ø§Ø±Ø§Ø©: ${homeTeam} Ø¶Ø¯ ${awayTeam}</h3>
                    <h4 style="color: #dc3545;">Ø§Ù„Ø­Ø§Ù„Ø©: ${status}</h4>
                </div>
                
                <h4>ğŸ“ Ø§Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©:</h4>
                <p>${details}</p>
                
                <p style="margin-top: 30px; color: #888;">**Ù…Ù„Ø§Ø­Ø¸Ø©:** ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© Ø§Ù„Ù…ØªØ§Ø­Ø© ÙÙŠ API. Ù„Ø¹Ø±Ø¶ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…ÙØµÙ„Ø© (Ø£Ù‡Ø¯Ø§ÙØŒ Ø¨Ø·Ø§Ù‚Ø§ØªØŒ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª) ÙÙŠ Ù…ÙˆØ¯Ø§Ù„ ÙƒØ§Ù…Ù„ Ø§Ù„Ø´Ø§Ø´Ø©ØŒ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ API Ø¢Ø®Ø± Ù…Ø®ØµØµ Ù„ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… (EID) Ø§Ù„Ø°ÙŠ ØªÙ… Ø¬Ù„Ø¨Ù‡.</p>
            `;
            matchModal.style.display = "block";
        }


        /**
         * 5. Ø¯Ø§Ù„Ø© Ù…Ø¹Ø§Ù„Ø¬Ø© ØªÙØ§Ø¹Ù„ Ø§Ù„Ù†Ù‚Ø±
         */
        function addInteractionListeners() {
            document.querySelectorAll('.league-name, .team-name').forEach(element => {
                element.addEventListener('click', (event) => {
                    event.stopPropagation();
                    
                    const type = event.target.dataset.type;
                    
                    if (type === 'league') {
                        // Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„Ø¯ÙˆØ±ÙŠ (Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„Ù‡ ÙÙŠ Ø§Ù„ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ØµØºÙŠØ±)
                        const leagueName = event.target.textContent;
                        const details = event.target.dataset.details;
                        leagueDetailsOutput.innerHTML = `
                            <h4>ğŸ“„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¹Ù† Ø§Ù„Ø¯ÙˆØ±ÙŠ:</h4>
                            <p>Ø§Ù„Ø¯ÙˆØ±ÙŠ: <strong>${leagueName}</strong></p>
                            <p>${details}</p>
                        `;

                    } else if (type === 'match') {
                        // Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚ (Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø© ÙÙŠ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„)
                        const homeTeam = event.target.dataset.hometeam;
                        const awayTeam = event.target.awayteam;
                        const status = event.target.dataset.status;
                        const details = event.target.dataset.details;

                        openModal(homeTeam, awayTeam, status, details);
                    }
                });
            });

            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ X Ø£Ùˆ Ø®Ø§Ø±Ø¬Ù‡
            closeModalButton.addEventListener('click', () => matchModal.style.display = "none");
            window.addEventListener('click', (event) => {
                if (event.target === matchModal) {
                    matchModal.style.display = "none";
                }
            });
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¯Ø§Ù„Ø© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        renderMatches();
    </script>
</body>
</html>
