<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Score Dark Mode Mockup</title>
    <style>
        /* --- Dark Mode CSS Styling --- */
        :root {
            --dark-bg: #1a1a1a;
            --main-bg: #282828;
            --card-bg: #333333;
            --text-color: #f0f0f0;
            --primary-color: #007bff;
            --live-color: #38c172;
            --completed-color: #959595;
            --border-color: #444444;
            --hover-color: #3a3a3a;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--dark-bg);
            color: var(--text-color);
            margin: 0;
            padding: 0;
        }
        .container {
            max-width: 900px;
            margin: 20px auto;
            background-color: var(--main-bg);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
        }
        h2 {
            color: var(--primary-color);
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
            margin-bottom: 25px;
            text-align: center;
        }

        /* --- Match Card Design --- */
        .league-header { 
            font-size: 1.1em;
            font-weight: bold;
            color: var(--live-color);
            background-color: var(--card-bg);
            padding: 12px;
            border-radius: 4px;
            margin-top: 15px;
            cursor: pointer;
            border: 1px solid var(--border-color);
            transition: background-color 0.2s;
        }
        .league-header:hover { background-color: var(--hover-color); }
        
        /* ğŸš© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù‡Ù†Ø§: ØªØ±ØªÙŠØ¨ Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„Ù†ØªÙŠØ¬Ø© ÙÙŠ Ø§Ù„Ù…Ù†ØªØµÙ */
        .match-row {
            /* 5 Ø£Ø¹Ù…Ø¯Ø©: Team A | Score A | Status/Time | Score B | Team B */
            display: grid;
            grid-template-columns: 4fr 1fr 1.5fr 1fr 4fr; 
            align-items: center;
            padding: 10px 0;
            background-color: var(--card-bg);
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: background-color 0.2s;
            margin-top: 1px;
        }
        .match-row:hover { background-color: var(--hover-color); }
        
        .team-name-display {
            text-align: right; /* Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„ (Ø§Ù„ÙŠØ³Ø§Ø±) */
            padding-right: 15px;
            font-weight: 500;
        }
        .team-name-away {
            text-align: left; /* Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ (Ø§Ù„ÙŠÙ…ÙŠÙ†) */
            padding-left: 15px;
            font-weight: 500;
        }
        
        /* Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ù†ØªØµÙ */
        .score-box {
            font-weight: bold;
            text-align: center;
            color: var(--text-color);
            background-color: var(--hover-color);
            padding: 5px 0; /* Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙ‚Ø· */
        }
        .center-status-time {
            font-weight: 600;
            text-align: center;
            font-size: 0.85em;
            /* Ù„Ù„ØªÙØ±ÙŠÙ‚ Ø¨ÙŠÙ† Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„Ù†ØªÙŠØ¬Ø© */
            border-left: 1px solid var(--border-color);
            border-right: 1px solid var(--border-color);
            padding: 5px 0;
        }
        
        /* Status Indicators */
        .live-status { color: var(--live-color); } 
        .ft-status { color: var(--completed-color); } 
        .ns-status { color: var(--primary-color); } 

        /* --- Modal Styling --- */
        .modal {
            display: none; position: fixed; z-index: 2000; left: 0; top: 0;
            width: 100%; height: 100%; overflow: auto;
            background-color: rgba(0, 0, 0, 0.85); 
            padding-top: 50px;
        }
        .modal-content {
            background-color: var(--card-bg); color: var(--text-color);
            margin: 5% auto; padding: 30px; border-radius: 10px;
            width: 90%; max-width: 700px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.9);
        }
        .close {
            color: var(--completed-color); float: right; font-size: 35px;
            font-weight: bold; cursor: pointer; transition: color 0.2s;
        }
        .close:hover { color: var(--text-color); }
        .modal-title {
            color: var(--live-color); text-align: center; margin-bottom: 20px;
            padding-bottom: 10px; border-bottom: 1px solid var(--border-color);
        }
        .loader {
            border: 4px solid var(--border-color); border-top: 4px solid var(--primary-color);
            border-radius: 50%; width: 30px; height: 30px;
            animation: spin 1s linear infinite; margin: 20px auto;
        }
        
        .modal-body table {
            width: 100%; border-collapse: collapse; margin-top: 15px;
            background-color: var(--hover-color); border: 1px solid var(--border-color);
        }
        .modal-body th, .modal-body td {
            padding: 10px 8px; border: 1px solid var(--border-color); text-align: center;
        }
        .modal-body th {
            background-color: var(--hover-color); color: var(--primary-color);
        }
        .modal-body h5 { color: var(--live-color); }
    </style>
</head>
<body>

    <div class="container">
        <h2>âš½ Today's Matches</h2>
        <div id="matches-list">
            <p id="loading-message" style="text-align: center;">Loading data...</p>
        </div>
    </div>

    <div id="app-modal" class="modal">
        <div class="modal-content">
            <span class="close" id="close-modal">&times;</span>
            <h3 class="modal-title" id="modal-title"></h3>
            <div id="modal-content-placeholder" class="modal-body">
                </div>
        </div>
    </div>

    <script>
        // --- JavaScript Logic (English) ---

        const PROXY_MATCHES_URL = 'https://mubarayat.netlify.app/.netlify/functions/fetch-matches'; 
        const PROXY_STANDINGS_URL = 'https://mubarayat.netlify.app/.netlify/functions/fetch-standings'; 
        const PROXY_DETAILS_URL = 'https://mubarayat.netlify.app/.netlify/functions/fetch-details'; 
        
        // ... (Ø¨Ø§Ù‚ÙŠ ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª)

        // ---------------------------------
        // Ø¯ÙˆØ§Ù„ Ø§Ù„Ø¬Ù„Ø¨ (Fetching Functions)
        // ---------------------------------
        // ... (Ø¯ÙˆØ§Ù„ fetchData, openModal, fetchStandings, fetchMatchDetails ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ)
        
        // ---------------------------------
        // Formatting & Rendering
        // ---------------------------------
        
        function getStatusInfo(eps) {
            switch (eps) {
                // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª 'NS' (Ù„Ù… ØªØ¨Ø¯Ø£) Ù†Ø³ØªØ®Ø¯Ù… 'Time' ÙƒØ±Ù…Ø² Ù„Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ÙˆÙ‚Øª
                case 'NS': return { text: 'Time', class: 'ns-status' };
                case 'FT': return { text: 'FT', class: 'ft-status' };
                case 'HT': return { text: 'HT', class: 'live-status' };
                case '1T': return { text: 'LIVE', class: 'live-status' };
                case '2T': return { text: 'LIVE', class: 'live-status' };
                default: return { text: eps, class: 'ns-status' };
            }
        }

        function formatTime(esd) {
            // ğŸš© Ø§Ù„ØªØµØ­ÙŠØ­: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø§Ù„Ù‚ÙŠÙ…Ø© ÙˆØ·ÙˆÙ„Ù‡Ø§ Ù„ØªØ¬Ù†Ø¨ undefined
            if (!esd || typeof esd !== 'string' || esd.length < 12) return 'N/A';
            
            // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„ÙˆÙ‚Øª ÙÙ‚Ø· (HH:MM)
            const hour = esd.substring(8, 10);
            const minute = esd.substring(10, 12);
            
            return `${hour}:${minute}`; 
        }
        
        async function renderMatches() {
            const data = await fetchData(PROXY_MATCHES_URL, 'Failed to fetch match list.');

            if (loadingMessage) loadingMessage.remove(); 
            
            if (!data || !data.Stages) {
                matchesList.innerHTML = `<p style="color: red; text-align: center;">ğŸ”´ Failed to load initial data. Check Netlify function: ${PROXY_MATCHES_URL}</p>`;
                return;
            }

            matchesList.innerHTML = ''; 

            data.Stages.forEach(stage => {
                const leagueName = stage.Snm || 'Unknown League';
                const countryName = stage.Cnm || 'Unknown Country';
                
                // ... (Ø¨Ù†Ø§Ø¡ League Header)
                
                if (stage.Events && stage.Events.length > 0) {
                    stage.Events.forEach(event => {
                        // ğŸš© Ø§Ù„ØªØµØ­ÙŠØ­: Ù‚Ø±Ø§Ø¡Ø© Ø¢Ù…Ù†Ø© Ù„Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                        const homeTeam = event.T1 ? (event.T1[0].Nm || 'Unknown') : 'Unknown';
                        const awayTeam = event.T2 ? (event.T2[0].Nm || 'Unknown') : 'Unknown';
                        
                        const eventStatus = event.Eps || 'NS'; // Ø§Ø³ØªØ®Ø¯Ø§Ù… 'NS' ÙƒØ§ÙØªØ±Ø§Ø¶ÙŠ
                        const statusInfo = getStatusInfo(eventStatus);
                        
                        const matchTime = formatTime(event.Esd); 
                        
                        // Ø¹Ø±Ø¶ Ø§Ù„ÙˆÙ‚Øª ÙÙ‚Ø· Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø­Ø§Ù„Ø© 'Time' (Ø£ÙŠ 'NS')
                        const displayStatusTime = statusInfo.text === 'Time' ? matchTime : statusInfo.text;
                        
                        const scoreHome = event.Tr1 || 0;
                        const scoreAway = event.Tr2 || 0;
                        
                        const row = document.createElement('div');
                        row.className = 'match-row';
                        
                        row.dataset.action = 'details';
                        row.dataset.eid = event.Eid;
                        row.dataset.home = homeTeam; // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¢Ù…Ù†Ø©
                        row.dataset.away = awayTeam; // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¢Ù…Ù†Ø©
                        
                        row.innerHTML = `
                            <span class="team-name-display">${homeTeam}</span>
                            <span class="score-box">${scoreHome}</span>
                            <span class="center-status-time ${statusInfo.class}">${displayStatusTime}</span>
                            <span class="score-box">${scoreAway}</span>
                            <span class="team-name-away">${awayTeam}</span>
                        `;
                        matchesList.appendChild(row);
                    });
                }
            });

            addInteractionListeners();
        }

        // ... (Ø¨Ø§Ù‚ÙŠ Ø¯ÙˆØ§Ù„ Event Listeners)
        
        renderMatches();
    </script>
</body>
</html>
</body>
</html>
